$(document).ready(function(){var e=$(window),t=e.height(),i=e.width(),n=new ScrollMagic.Controller,o=$("#slider"),r=Math.max(t/2848,i/4288),a=new TimelineLite({paused:!0}).to(o,1,{zoom:r,force3D:!0}).to($("#start"),.1,{css:{autoAlpha:"0",display:"none"}},0).to(o,.5,{autoAlpha:"0",force3D:!0}).set(o,{css:{display:"none"}}),s=e.scrollTop();e.on("scroll",function(){s=e.scrollTop();var i=s/t;i>=0&&(a.progress()<1||1.5>=i)&&TweenLite.to(a.pause(),.1,{time:i})}),new ScrollMagic.Scene({offset:t,duration:2*t}).setTween((new TimelineLite).to($("#bg1"),1,{css:{top:"-18%"}})).addTo(n),new ScrollMagic.Scene({triggerElement:"#section3",triggerHook:"onEnter",duration:t}).setTween((new TimelineLite).to($("#colorslider"),1,{css:{top:"-=100%"}})).addTo(n);var c={discard:[["Monitors",595],["Computers",423],["Hard Drives",290],["Computer Peripherals",67],["Mobile Devices",19]],create:[["Computers",40],["Monitors",33],["Hard Drives",33],["Peripherals",10],["Mobile Devices",11]],countries:{names:["USA","EU Nations","China","India","Japan","Russia"],values:[10.3,10.9,8,3,3,1.6]}},l=void 0,d=void 0;new ScrollMagic.Scene({triggerElement:"#pin",triggerHook:"onCenter",duration:0}).on("enter",function(){l=l||new Highcharts.Chart({chart:{type:"pie",renderTo:"chart"},title:{text:"Waste",align:"center",verticalAlign:"middle"},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"k"},series:[{type:"pie",name:"Tons Discarded",innerSize:"30%",data:JSON.parse(JSON.stringify(c.discard))}]})}).addTo(n),new ScrollMagic.Scene({triggerElement:"#pin",triggerHook:"onLeave",duration:t}).setPin("#pin").addTo(n),new ScrollMagic.Scene({triggerElement:"#section2",duration:0}).on("enter",function(){$.each(l.series[0].data,function(e,t){t.update(c.create[e],!1)}),l.series[0].tooltipOptions.valueSuffix="%",l.series[0].name="Percentage Recycled",l.redraw()}).on("leave",function(){$.each(l.series[0].data,function(e,t){t.update(c.discard[e],!1)}),l.series[0].tooltipOptions.valueSuffix="k",l.series[0].name="Tons Discarded",l.redraw()}).addTo(n),new ScrollMagic.Scene({triggerElement:"#section3",triggerHook:"onCenter",duration:0}).on("enter",function(){d=d||new Highcharts.Chart({chart:{type:"bar",renderTo:"barchart"},title:{text:"E-Waste Production by Country"},tooltip:{valueSuffix:" million"},xAxis:{categories:c.countries.names},yAxis:{min:0,title:{text:"Discards (Million Tons)",align:"high"}},plotOptions:{bar:{dataLabels:{enabled:!0}}},series:[{name:"Top Countries",data:c.countries.values}]})}).addTo(n);var p=$("#cellphone");p.on("load",function(){p.css("left",-p.width()/3+"px")});var u=(new TimelineLite).fromTo(p,1,{top:"0"},{top:"-100%"});new ScrollMagic.Scene({triggerElement:"#case",triggerHook:"onCenter",duration:2*t}).setTween(u).setPin("#case").addTo(n)});